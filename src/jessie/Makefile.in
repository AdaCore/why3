FRAMAC_SHARE    := $(shell frama-c -print-path)
FRAMAC_LIBDIR   := $(shell frama-c -print-libpath)
PLUGIN_NAME     := Jessie3
PLUGIN_CMO      := literals ACSLtoWhy3 register

SHELL := /bin/bash

WHYLIB := ../../lib/why3

PLUGIN_EXTRA_BYTE:= $(WHYLIB)/why3.cma
PLUGIN_EXTRA_OPT:= $(WHYLIB)/why3.cmxa
PLUGIN_BFLAGS:= -I $(WHYLIB)
PLUGIN_OFLAGS:= -I $(WHYLIB)
PLUGIN_LINK_BFLAGS:= -I $(WHYLIB)
PLUGIN_LINK_OFLAGS:= -I $(WHYLIB)
PLUGIN_TESTS_DIRS := basic

OCAMLLEX  = @OCAMLLEX@

literals.ml: literals.mll
	$(OCAMLLEX) $<

include $(FRAMAC_SHARE)/Makefile.dynamic

tests::
	grep Status tests/basic/result/*

