
(* test file for ML-why *)

{ 
use import prelude.Int
logic f(int) : int 
logic g(x : int) : int = f(x+1)
}

let p = 
  if !x = 1 then begin end else ghost begin !x end;
  L:
  assert { !x = 0 };
  check { false };
  let z = !x + !x in
  let t = ghost (ref 2) in
  assume { true -> old(!z) = 2 }; 
  while !x >= 0 do
    invariant { true } variant { t }
    ()
  done;
  f !x

{ 
axiom A : forall x:int. f(x) = g(x-1)
}


(*
Local Variables: 
compile-command: "unset LANG; make -C ../.. testl"
End: 
*)
