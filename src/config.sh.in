#!/bin/sh

F=src/config.ml

echo "let version   = \"@VERSION@\"" > $F
echo "let builddate = \"@BUILDDATE@\"" >> $F
echo "let plugins   = (\"@enable_plugins@\" = \"yes\")" >> $F
echo "let libdir    = \"$LIBDIR/why3\"" >> $F
echo "let datadir   = \"$DATADIR/why3\"" >> $F

echo "
module Dynlink_ = struct
  let is_native = true
  let loadfile_private _ = assert false

  type error
  exception Error of error
  let error_message _ = (assert false : string)
end

module Dynlink = struct
  include @DYNLINK@
end
" >> $F
