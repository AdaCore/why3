
module P

  use import int.Int
  use import module stdlib.Ref

  use import list.List
  use import list.Length

let rec length_ (l : list 'a) variant { length l } = 
  {}
  match l with
  | Nil -> 0
  | Cons _ r -> 1 + length_ r
  end
  { result = length l }

  (* parameter b : ref int *)

  (* let f () =  *)
  (*   { b>0 } !b + 1 { result > b } *)

  let test r =
    { r = 1 }
    assert { r = 1 };
    r := !r + 1;
    assert { r = 2 }
    { true }

end

(*
Local Variables: 
compile-command: "unset LANG; make -C .. testl-ide"
End: 
*)
