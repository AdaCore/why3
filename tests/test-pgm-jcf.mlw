
let test (x : ref int) =
  {}
  let z = ref 0 in
  if !x >= 0 then ref !x else z
  { !result >= 0 }

let f () = 
  let r = test (ref (-2)) in
  assert { !r >= 0 };
  r := 1;
  assert { !r > 0 }

let foo () =
  let x = any {} int {result=0} in
  let y = any {} int {result=result+1} in 
  assert { false }

(*
Local Variables: 
compile-command: "unset LANG; make -C .. testl"
End: 
*)
