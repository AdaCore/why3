
let test (x : ref int) =
  {}
  let z = ref 0 in
  if !x >= 0 then ref !x else z
  { !result >= 0 }

let f () = 
  let r = test (ref (-2)) in
  assert { !r >= 0 };
  r := 1;
  assert { !r > 0 }

let foo () =
  let x = ref 0 in
  x := 1;
  assert { !x = 1 };
  x := !x + 1;
  assert { !x > 1 }

(*
Local Variables: 
compile-command: "unset LANG; make -C .. testl"
End: 
*)
