
module P

  use import int.Int
  use import module stdlib.Ref
  use import module stdlib.Array

  parameter x : ghost int

  let gid (x:int) = {} ghost x { result=x }

  let g (x : int) (y : ghost int) =
    let z = ghost (1 + gid y) in
    assert { z = 1 + y };
    x + 1

  (* FIXME *)
  (* let gid (x:int) = {} (x, ghost_ x) { let a,b = result in a=x and b=x } *)

end


(*
Local Variables: 
compile-command: "unset LANG; make -C .. testl-ide"
End: 
*)
