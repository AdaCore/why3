
theory T
  type t = int
end

module M
  use import int.Int
  use import T
  function f (x: t) : t = x+1
  goal G: forall x: t. x=x

end

module N
  use import int.Int
  use import M
  goal G1: f 41 = 42

  type unit = ()

  type tree 'a = Node 'a (forest 'a) | Leaf
  with forest 'a = Cons (tree 'a) (forest 'a) | Nil

  type ref 'b = {| ghost mutable contents : 'b |}

  type myrec 'a = {| f1 : int ; f2 : tree 'a |}

  let h x =
    let bang y = y.contents in
    let z = bang x + zero in
    let u = {| f1 = z; f2 = Node x Nil |} in
    let r = {| contents = {| u with f2 = Node one Nil |} |} in
    x.contents <- one;
    r (* zero *)
end

(*
Local Variables:
compile-command: "unset LANG; ../bin/why3ide test-pgm-jcf.mlx"
End:
*)
